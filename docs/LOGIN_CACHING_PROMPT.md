# Create caching of wallet and account state for fast login

- Right now a login via `loginWithKeys` needs to decrypt tons of account info and also spin up wallet plugins and engine in order to provide the edge-react-gui front end with wallet data such as wallet names, wallet asset, and balances.
- This is mostly held in the loginTree.
- The goal is to cache the loginTree and possibly all other state in unencrypted json files, one per account stored by loginId on disk.
- Transactions should not be cached
- No specific limit as it can grow with more wallets
- It's acceptable to have a stale cache. It's always stale even when waiting on engines as they cache data as well before accessing network
- The cache is updated whenever the such values change such as when the engines make a balance update callback, when the user changes a wallet name, or when the edge-core-js synchronizes updated data from sync serves such as the wallet names.
- Upon successful loginWithKeys, loginWithPin, or loginWithPassword, if a cache exists on disk, edge-core-js should rehydrate the cache first w/o instantiating any plugins or engines.
- The core usually makes callbacks to the UI to notify it of wallets being loaded, balances being updated. These should happen immediately after the cache is loaded.
- At the same time, the core should instantiate the respective plugins and engines, but NOT await them. It should hold a dangling promise that will be awaited only if the gui specifically calls an EdgeCurrencyEngine or EdgeCurrencyTools method.
- For security, the private keys generated by the plugins should not be cached. These are generated by each plugin when the core calls createPrivateKey.
- The only important data to cache that takes a long time to load are the names and asset types of each wallet including which tokens are enabled as well as the balances of each asset including tokens.
- For now we can prevent caching the data that gets decrypted by the loginWith* methods before the loginWith* methods return to the UI.
- It's the background methods that start the engines that takes long and the data from that needs to be cached.
